{% extends 'base.html' %}
{% load i18n %}
{% load static %}
{% block title %}Browse Listings - Ethagora{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/listing.css' %}">
<div class="min-h-screen bg-gray-50">
    <!-- Mobile-First Header with Search -->
    <div class=" top-0 z-50 bg-white shadow-sm">
        <div class="px-4 py-3">
            <!-- Search Bar -->
         {% include 'listings/partials/search_filter.html' %}
        </div>
    </div>
    
    <!-- Enhanced Category Navigation with Icons -->
    <div class="bg-white border-b shadow-sm">
        <div class="px-4 py-4">
            <!-- Categories Horizontal Scroll -->
            <div class="flex space-x-3 overflow-x-auto scrollbar-hide pb-2" id="categories-container">
                <!-- All Items -->
                <button data-category="" class="category-btn flex-shrink-0 flex flex-col items-center space-y-1 px-4 py-3 bg-gray-900 text-white rounded-xl transition-all shadow-sm">
                    <div class="w-8 h-8 flex items-center justify-center bg-white/20 rounded-lg">
                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5.127 3.502L5.25 3.5h9.5c.041 0 .082 0 .123.002A2.251 2.251 0 0012.75 2h-5.5a2.251 2.251 0 00-2.123 1.502zM1 10.25A2.25 2.25 0 013.25 8h13.5A2.25 2.25 0 0119 10.25v5.5A2.25 2.25 0 0116.75 18H3.25A2.25 2.25 0 011 15.75v-5.5zM3.25 6.5c-.04 0-.082 0-.123.002A2.251 2.251 0 005.25 5h9.5c.98 0 1.814.627 2.123 1.502a3.819 3.819 0 00-.123-.002H3.25z"/>
                        </svg>
                    </div>
                    <span class="text-xs font-medium">All</span>
                </button>
                
                {% for category in categories %}
                <button data-category="{{ category.id }}" class="category-btn flex-shrink-0 flex flex-col items-center space-y-1 px-4 py-3 bg-white text-gray-700 rounded-xl border border-gray-100 hover:border-gray-200 hover:shadow-sm transition-all">
                    <div class="w-8 h-8 flex items-center justify-center bg-gray-50 rounded-lg group-hover:bg-blue-50 transition-colors">
                       <i class="fas fa-{{ category.icon }}"></i>
                    </div>
                    <span class="text-xs font-medium text-center leading-tight">{{ category.name }}</span>
                </button>
                {% endfor %}
            </div>
            
            <!-- Enhanced Subcategories with Icons -->
            <div id="subcategory-section" class="hidden mt-4 pt-3 border-t border-gray-100">
                <div class="flex items-center justify-between mb-3">
                    <h3 class="text-sm font-medium text-gray-700">Subcategories</h3>
                    <button id="subcategory-clear" class="text-xs text-blue-600 hover:text-blue-700 font-medium">Clear Selection</button>
                </div>
                <div id="subcategory-chips" class="flex space-x-2 overflow-x-auto scrollbar-hide"></div>
            </div>
            <div>
                location
            </div>
        </div>
    </div>

    <!-- Results Counter -->
    <div class="px-4 py-3 bg-white border-b">
        <div class="flex items-center justify-between">
            <!-- <span id="results-count" class="text-sm text-gray-600 font-medium">
                {{ listings.paginator.count }} result{{ listings.paginator.count|pluralize }}
            </span> -->
            <!-- Active Filters Display -->
            <div id="active-filters" class="flex items-center space-x-2"></div>
        </div>
    </div>

    <!-- Listings Grid -->
    <div id="listings-container" class="px-4 py-4">
        {% include 'listings/partials/listing_cards.html' %}
    </div>
</div>
{% endblock %}